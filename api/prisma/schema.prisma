generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id       String @id @default(uuid())
  name     String
  email    String @unique
  password String

  books Book[]

  created_at      DateTime         @default(now())
  updated_at      DateTime         @updatedAt
  readingSessions ReadingSession[]

  @@map("users")
}

model Book {
  id             String @id @default(uuid())
  title          String
  author         String
  genre          String
  cover_url      String
  user_id        String
  google_book_id String @unique

  pages           Int
  created_at      DateTime         @default(now())
  updated_at      DateTime         @updatedAt
  readingSessions ReadingSession[]

  user User @relation(fields: [user_id], references: [id])

  @@map("books")
}

enum ReadingStatus {
  PENDING
  READING
  COMPLETED
}

model ReadingSession {
  id           String        @id @default(uuid())
  user_id      String
  book_id      String
  start_time   DateTime
  end_time     DateTime
  status       ReadingStatus @default(PENDING)
  current_page Int           @default(0)
  created_at   DateTime      @default(now())
  updated_at   DateTime      @updatedAt

  user User @relation(fields: [user_id], references: [id])
  book Book @relation(fields: [book_id], references: [id])

  @@map("reading_sessions")
}
